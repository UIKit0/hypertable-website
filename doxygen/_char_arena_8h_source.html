<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>hypertable: /Users/doug/src/hypertable/src/cc/Common/CharArena.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_9e51036813d6151dfecc72d5fa7c02b3.html">Users</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5708de38a757cb70589c505d18009990.html">doug</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_a5f6cd2e2a2b5320bbe75e5c719f1fee.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_752ad1e2f45ee7988941467b4eccee0e.html">hypertable</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_9031e3d7c38caf639b0143600d70b482.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_f5aae9766518c5969fd00e3382787720.html">cc</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_c15830aad3a99e858e4f63b1b1579632.html">Common</a>
  </div>
</div>
<div class="contents">
<h1>CharArena.h</h1><a href="_char_arena_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef HYPERTABLE_CHARARENA_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define HYPERTABLE_CHARARENA_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;cstring&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;cstddef&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;cassert&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include "<a class="code" href="_logger_8h.html">Common/Logger.h</a>"</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;boost/static_assert.hpp&gt;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="keyword">namespace </span>Hypertable {
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="struct_hypertable_1_1_default_page_allocator.html">00035</a> <span class="keyword">struct </span><a class="code" href="struct_hypertable_1_1_default_page_allocator.html">DefaultPageAllocator</a> {
<a name="l00036"></a><a class="code" href="struct_hypertable_1_1_default_page_allocator.html#b9979de10d4da5ed73845661b34e66e0">00036</a>   <span class="keywordtype">void</span> *<a class="code" href="struct_hypertable_1_1_default_page_allocator.html#b9979de10d4da5ed73845661b34e66e0">allocate</a>(<span class="keywordtype">size_t</span> sz) { <span class="keywordflow">return</span> std::malloc(sz); }
<a name="l00037"></a><a class="code" href="struct_hypertable_1_1_default_page_allocator.html#91b4fd9cfe40ba5c932a214dbfb9a975">00037</a>   <span class="keywordtype">void</span> <a class="code" href="struct_hypertable_1_1_default_page_allocator.html#91b4fd9cfe40ba5c932a214dbfb9a975">deallocate</a>(<span class="keywordtype">void</span> *p) { std::free(p); }
<a name="l00038"></a>00038 };
<a name="l00039"></a>00039 
<a name="l00045"></a>00045 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> CharT = <span class="keywordtype">char</span>, <span class="keyword">class</span> PageAllocT = DefaultPageAllocator&gt;
<a name="l00046"></a><a class="code" href="class_hypertable_1_1_page_arena.html">00046</a> <span class="keyword">class </span><a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">PageArena</a> {
<a name="l00047"></a>00047 <span class="keyword">private</span>: <span class="comment">// types</span>
<a name="l00048"></a><a class="code" href="class_hypertable_1_1_page_arena.html#ca989dbd94bbcf9e9b4de53a35b57b1f8b94da84db20bd8efe0c78496d4feb9a">00048</a>   <span class="keyword">enum</span> { <a class="code" href="class_hypertable_1_1_page_arena.html#ca989dbd94bbcf9e9b4de53a35b57b1f8b94da84db20bd8efe0c78496d4feb9a">DEFAULT_PAGE_SIZE</a> = 8192 }; <span class="comment">// 8KB</span>
<a name="l00049"></a><a class="code" href="class_hypertable_1_1_page_arena.html#cf27f53b465f8e02c6b2a30656786667">00049</a>   <span class="keyword">typedef</span> <a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">PageArena&lt;CharT, PageAllocT&gt;</a> <a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">SelfT</a>;
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html">00051</a>   <span class="keyword">struct </span><a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html">Page</a> {
<a name="l00052"></a><a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#4ec001615d3e95c7bfdea5aaeaa02112">00052</a>     <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html">Page</a> *<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#4ec001615d3e95c7bfdea5aaeaa02112">next_page</a>;
<a name="l00053"></a><a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">00053</a>     <span class="keywordtype">char</span> *<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">alloc_end</a>;
<a name="l00054"></a><a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#5f9300af9342fe4a5f6937254f0e3695">00054</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#5f9300af9342fe4a5f6937254f0e3695">page_end</a>;
<a name="l00055"></a><a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#0f3d450a7031f0c3bba1f3aac4988353">00055</a>     <span class="keywordtype">char</span> <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#0f3d450a7031f0c3bba1f3aac4988353">buf</a>[1];
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#df990243e799214ffb41d027035b6b33">00057</a>     <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#df990243e799214ffb41d027035b6b33">Page</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *end) : <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#4ec001615d3e95c7bfdea5aaeaa02112">next_page</a>(0), <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#5f9300af9342fe4a5f6937254f0e3695">page_end</a>(end) {
<a name="l00058"></a>00058       <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">alloc_end</a> = <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#0f3d450a7031f0c3bba1f3aac4988353">buf</a>;
<a name="l00059"></a>00059     }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061     <span class="keywordtype">size_t</span>
<a name="l00062"></a><a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#5125f217ab2d32aad625f51a476171b8">00062</a>     <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#5125f217ab2d32aad625f51a476171b8">remain</a>() { <span class="keywordflow">return</span> <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#5f9300af9342fe4a5f6937254f0e3695">page_end</a> - <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">alloc_end</a>; }
<a name="l00063"></a>00063 
<a name="l00064"></a>00064     CharT *
<a name="l00065"></a><a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#9f0d59df8b245b91a49efdd389dd2928">00065</a>     <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#9f0d59df8b245b91a49efdd389dd2928">alloc</a>(<span class="keywordtype">size_t</span> sz) {
<a name="l00066"></a>00066       assert(sz &lt;= <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#5125f217ab2d32aad625f51a476171b8">remain</a>());
<a name="l00067"></a>00067       <span class="keywordtype">char</span> *start = <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">alloc_end</a>;
<a name="l00068"></a>00068       <a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">alloc_end</a> += sz;
<a name="l00069"></a>00069       <span class="keywordflow">return</span> (CharT *)start;
<a name="l00070"></a>00070     }
<a name="l00071"></a>00071   };
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="keyword">private</span>: <span class="comment">// data</span>
<a name="l00074"></a><a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">00074</a>   Page *<a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>;
<a name="l00075"></a><a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">00075</a>   <span class="keywordtype">size_t</span> <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a>;        <span class="comment">// total number of bytes allocated by users</span>
<a name="l00076"></a><a class="code" href="class_hypertable_1_1_page_arena.html#10c1f074e052f5693b2a969c33fc52a8">00076</a>   <span class="keywordtype">size_t</span> <a class="code" href="class_hypertable_1_1_page_arena.html#10c1f074e052f5693b2a969c33fc52a8">m_page_limit</a>;  <span class="comment">// capacity in bytes of an empty page</span>
<a name="l00077"></a><a class="code" href="class_hypertable_1_1_page_arena.html#8a92a86db5f5e9b36024e8ff0ae2848b">00077</a>   <span class="keywordtype">size_t</span> <a class="code" href="class_hypertable_1_1_page_arena.html#8a92a86db5f5e9b36024e8ff0ae2848b">m_page_size</a>;   <span class="comment">// page size in number of bytes</span>
<a name="l00078"></a><a class="code" href="class_hypertable_1_1_page_arena.html#6401242bb26b277ceba8683928403aee">00078</a>   <span class="keywordtype">size_t</span> <a class="code" href="class_hypertable_1_1_page_arena.html#6401242bb26b277ceba8683928403aee">m_pages</a>;       <span class="comment">// number of pages allocated</span>
<a name="l00079"></a><a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">00079</a>   <span class="keywordtype">size_t</span> <a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">m_total</a>;       <span class="comment">// total number of bytes occupied by pages</span>
<a name="l00080"></a><a class="code" href="class_hypertable_1_1_page_arena.html#70984b3f84c0e803a4b0dd8f37f7f3de">00080</a>   PageAllocT <a class="code" href="class_hypertable_1_1_page_arena.html#70984b3f84c0e803a4b0dd8f37f7f3de">m_allocator</a>;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="keyword">private</span>: <span class="comment">// helpers</span>
<a name="l00083"></a>00083   Page *
<a name="l00084"></a><a class="code" href="class_hypertable_1_1_page_arena.html#44c452bae3cd5035244061eaf9fe523b">00084</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#44c452bae3cd5035244061eaf9fe523b">alloc_page</a>(<span class="keywordtype">size_t</span> sz, <span class="keywordtype">bool</span> prepend = <span class="keyword">true</span>) {
<a name="l00085"></a>00085     Page *page = (Page *) <a class="code" href="class_hypertable_1_1_page_arena.html#70984b3f84c0e803a4b0dd8f37f7f3de">m_allocator</a>.allocate(sz);
<a name="l00086"></a>00086     <a class="code" href="_logger_8h.html#0a4d029a49b4d41128585cd2988b47df">HT_EXPECT</a>(page, <a class="code" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20ed4421fa5f40e5bdd815b1b4778a8b7">Error::BAD_MEMORY_ALLOCATION</a>);
<a name="l00087"></a>00087     <span class="keyword">new</span> (page) Page((<span class="keywordtype">char</span> *)page + sz);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="keywordflow">if</span> (<a class="code" href="compat-c_8h.html#a23f36752c3417875d96b926ab66341d">HT_LIKELY</a>(prepend))
<a name="l00090"></a>00090       page-&gt;next_page = <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>;
<a name="l00091"></a>00091     <span class="keywordflow">else</span> if (<a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>) {
<a name="l00092"></a>00092       <span class="comment">// insert after cur page, for big/full pages</span>
<a name="l00093"></a>00093       page-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#4ec001615d3e95c7bfdea5aaeaa02112">next_page</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#4ec001615d3e95c7bfdea5aaeaa02112">next_page</a>;
<a name="l00094"></a>00094       <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#4ec001615d3e95c7bfdea5aaeaa02112">next_page</a> = page;
<a name="l00095"></a>00095     }
<a name="l00096"></a>00096     <span class="keywordflow">else</span> <span class="comment">// don't leak it</span>
<a name="l00097"></a>00097       <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a> = page;
<a name="l00098"></a>00098 
<a name="l00099"></a>00099     ++<a class="code" href="class_hypertable_1_1_page_arena.html#6401242bb26b277ceba8683928403aee">m_pages</a>;
<a name="l00100"></a>00100     <a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">m_total</a> += sz;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="keywordflow">return</span> page;
<a name="l00103"></a>00103   }
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   <span class="comment">// not pubicly copy construtable</span>
<a name="l00106"></a><a class="code" href="class_hypertable_1_1_page_arena.html#28d8590b1af2b18f283d6d49f8b3cc59">00106</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#28d8590b1af2b18f283d6d49f8b3cc59">PageArena</a>(<span class="keyword">const</span> <a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">SelfT</a> &amp;<a class="code" href="namespace_hypertable.html#c6963a6498b26e7052b0929dafdb2ce5">copy</a>) { <a class="code" href="class_hypertable_1_1_page_arena.html#3a5acf238cbf485d9ab74475a45cf24b">operator=</a>(copy); }
<a name="l00107"></a>00107 
<a name="l00108"></a>00108   <span class="comment">// not publicly assignable; shallow copy for swap</span>
<a name="l00109"></a><a class="code" href="class_hypertable_1_1_page_arena.html#3a5acf238cbf485d9ab74475a45cf24b">00109</a>   <a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">SelfT</a> &amp;<a class="code" href="class_hypertable_1_1_page_arena.html#3a5acf238cbf485d9ab74475a45cf24b">operator=</a>(<span class="keyword">const</span> <a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">SelfT</a> &amp;x) {
<a name="l00110"></a>00110     <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a> = x.<a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>;
<a name="l00111"></a>00111     <a class="code" href="class_hypertable_1_1_page_arena.html#10c1f074e052f5693b2a969c33fc52a8">m_page_limit</a> = x.<a class="code" href="class_hypertable_1_1_page_arena.html#10c1f074e052f5693b2a969c33fc52a8">m_page_limit</a>;
<a name="l00112"></a>00112     <a class="code" href="class_hypertable_1_1_page_arena.html#8a92a86db5f5e9b36024e8ff0ae2848b">m_page_size</a> = x.<a class="code" href="class_hypertable_1_1_page_arena.html#8a92a86db5f5e9b36024e8ff0ae2848b">m_page_size</a>;
<a name="l00113"></a>00113     <a class="code" href="class_hypertable_1_1_page_arena.html#6401242bb26b277ceba8683928403aee">m_pages</a> = x.<a class="code" href="class_hypertable_1_1_page_arena.html#6401242bb26b277ceba8683928403aee">m_pages</a>;
<a name="l00114"></a>00114     <a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">m_total</a> = x.<a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">m_total</a>;
<a name="l00115"></a>00115     <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a> = x.<a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a>;
<a name="l00116"></a>00116     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00117"></a>00117   }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="keyword">public</span>: <span class="comment">// API</span>
<a name="l00121"></a><a class="code" href="class_hypertable_1_1_page_arena.html#11318f03f91cddceed3ccdb9f79b1cf2">00121</a> <span class="comment"></span>  <a class="code" href="class_hypertable_1_1_page_arena.html#28d8590b1af2b18f283d6d49f8b3cc59">PageArena</a>(<span class="keywordtype">size_t</span> page_size = <a class="code" href="class_hypertable_1_1_page_arena.html#ca989dbd94bbcf9e9b4de53a35b57b1f8b94da84db20bd8efe0c78496d4feb9a">DEFAULT_PAGE_SIZE</a>,
<a name="l00122"></a>00122             <span class="keyword">const</span> PageAllocT &amp;<a class="code" href="class_hypertable_1_1_page_arena.html#57261aae2e6d866d2ea6aa14f9101d8b" title="allocate sz bytes">alloc</a> = PageAllocT())
<a name="l00123"></a>00123     : <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>(0), <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a>(0), <a class="code" href="class_hypertable_1_1_page_arena.html#10c1f074e052f5693b2a969c33fc52a8">m_page_limit</a>(0), <a class="code" href="class_hypertable_1_1_page_arena.html#8a92a86db5f5e9b36024e8ff0ae2848b">m_page_size</a>(page_size),
<a name="l00124"></a>00124       <a class="code" href="class_hypertable_1_1_page_arena.html#6401242bb26b277ceba8683928403aee">m_pages</a>(0), <a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">m_total</a>(0), <a class="code" href="class_hypertable_1_1_page_arena.html#70984b3f84c0e803a4b0dd8f37f7f3de">m_allocator</a>(<a class="code" href="class_hypertable_1_1_page_arena.html#57261aae2e6d866d2ea6aa14f9101d8b" title="allocate sz bytes">alloc</a>) {
<a name="l00125"></a>00125     BOOST_STATIC_ASSERT(<span class="keyword">sizeof</span>(CharT) == 1);
<a name="l00126"></a>00126     <a class="code" href="_logger_8h.html#cf985e8f1a1bebe7d622115e4b3e08a6">HT_ASSERT</a>(page_size &gt; <span class="keyword">sizeof</span>(Page));
<a name="l00127"></a>00127   }
<a name="l00128"></a><a class="code" href="class_hypertable_1_1_page_arena.html#ff98cfb283b89274a9f0af5b9bbba4a6">00128</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#ff98cfb283b89274a9f0af5b9bbba4a6">~PageArena</a>() { <a class="code" href="class_hypertable_1_1_page_arena.html#c8b84843036e1ba566a427c7de85fb8e" title="free the whole arena">free</a>(); }
<a name="l00129"></a>00129 
<a name="l00131"></a>00131   CharT *
<a name="l00132"></a><a class="code" href="class_hypertable_1_1_page_arena.html#57261aae2e6d866d2ea6aa14f9101d8b">00132</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#57261aae2e6d866d2ea6aa14f9101d8b" title="allocate sz bytes">alloc</a>(<span class="keywordtype">size_t</span> sz) {
<a name="l00133"></a>00133     <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a> += sz;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="keywordflow">if</span> (!<a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>) {
<a name="l00136"></a>00136       <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#44c452bae3cd5035244061eaf9fe523b">alloc_page</a>(<a class="code" href="class_hypertable_1_1_page_arena.html#8a92a86db5f5e9b36024e8ff0ae2848b">m_page_size</a>);
<a name="l00137"></a>00137       <a class="code" href="class_hypertable_1_1_page_arena.html#10c1f074e052f5693b2a969c33fc52a8">m_page_limit</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#5125f217ab2d32aad625f51a476171b8">remain</a>();
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="comment">// common case</span>
<a name="l00141"></a>00141     <span class="keywordflow">if</span> (<a class="code" href="compat-c_8h.html#a23f36752c3417875d96b926ab66341d">HT_LIKELY</a>(sz &lt;= m_cur_page-&gt;remain()))
<a name="l00142"></a>00142       <span class="keywordflow">return</span> <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#9f0d59df8b245b91a49efdd389dd2928">alloc</a>(sz);
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <span class="comment">// normal overflow</span>
<a name="l00145"></a>00145     <span class="keywordflow">if</span> (sz &lt;= m_page_limit &amp;&amp; m_cur_page-&gt;remain() &lt; <a class="code" href="class_hypertable_1_1_page_arena.html#10c1f074e052f5693b2a969c33fc52a8">m_page_limit</a> / 2) {
<a name="l00146"></a>00146       <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#44c452bae3cd5035244061eaf9fe523b">alloc_page</a>(<a class="code" href="class_hypertable_1_1_page_arena.html#8a92a86db5f5e9b36024e8ff0ae2848b">m_page_size</a>);
<a name="l00147"></a>00147       <span class="keywordflow">return</span> <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#9f0d59df8b245b91a49efdd389dd2928">alloc</a>(sz);
<a name="l00148"></a>00148     }
<a name="l00149"></a>00149     <span class="comment">// big enough objects to have their own page</span>
<a name="l00150"></a>00150     Page *p = <a class="code" href="class_hypertable_1_1_page_arena.html#44c452bae3cd5035244061eaf9fe523b">alloc_page</a>(sz + <span class="keyword">sizeof</span>(Page) + 1, <span class="keyword">false</span>);
<a name="l00151"></a>00151     <span class="keywordflow">return</span> p-&gt;alloc(sz);
<a name="l00152"></a>00152   }
<a name="l00153"></a>00153 
<a name="l00155"></a>00155   CharT *
<a name="l00156"></a><a class="code" href="class_hypertable_1_1_page_arena.html#8df61bd17240e37aa8cd371e50e5e6ec">00156</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#8df61bd17240e37aa8cd371e50e5e6ec" title="allocate sz bytes">alloc_aligned</a>(<span class="keywordtype">size_t</span> sz) {
<a name="l00157"></a>00157     <span class="keywordtype">size_t</span> align_offset;
<a name="l00158"></a>00158 
<a name="l00159"></a>00159     <span class="keywordflow">if</span> (!<a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>) {
<a name="l00160"></a>00160       <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#44c452bae3cd5035244061eaf9fe523b">alloc_page</a>(<a class="code" href="class_hypertable_1_1_page_arena.html#8a92a86db5f5e9b36024e8ff0ae2848b">m_page_size</a>);
<a name="l00161"></a>00161       <a class="code" href="class_hypertable_1_1_page_arena.html#10c1f074e052f5693b2a969c33fc52a8">m_page_limit</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#5125f217ab2d32aad625f51a476171b8">remain</a>();
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *) == 8)
<a name="l00165"></a>00165       align_offset = (8 - (size_t)(((uint64_t)<a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">alloc_end</a>) &amp; 0x7)) &amp; 0x7;
<a name="l00166"></a>00166     <span class="keywordflow">else</span>
<a name="l00167"></a>00167       align_offset = (4 - (size_t)(((uint32_t)<a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">alloc_end</a>) &amp; 0x3)) &amp; 0x3;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <span class="keywordtype">size_t</span> adjusted_sz = sz + align_offset;
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     <span class="comment">// common case</span>
<a name="l00172"></a>00172     <span class="keywordflow">if</span> (<a class="code" href="compat-c_8h.html#a23f36752c3417875d96b926ab66341d">HT_LIKELY</a>(adjusted_sz &lt;= m_cur_page-&gt;remain())) {
<a name="l00173"></a>00173       <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a> += adjusted_sz;
<a name="l00174"></a>00174       <span class="keywordflow">return</span> <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#9f0d59df8b245b91a49efdd389dd2928">alloc</a>(adjusted_sz) + align_offset;
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177     <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a> += sz;
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     <span class="comment">// normal overflow</span>
<a name="l00180"></a>00180     <span class="keywordflow">if</span> (sz &lt;= m_page_limit &amp;&amp; m_cur_page-&gt;remain() &lt; <a class="code" href="class_hypertable_1_1_page_arena.html#10c1f074e052f5693b2a969c33fc52a8">m_page_limit</a> / 2) {
<a name="l00181"></a>00181       <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#44c452bae3cd5035244061eaf9fe523b">alloc_page</a>(<a class="code" href="class_hypertable_1_1_page_arena.html#8a92a86db5f5e9b36024e8ff0ae2848b">m_page_size</a>);
<a name="l00182"></a>00182       <span class="keywordflow">return</span> <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#9f0d59df8b245b91a49efdd389dd2928">alloc</a>(sz);
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184     <span class="comment">// big enough objects to have their own page</span>
<a name="l00185"></a>00185     Page *p = <a class="code" href="class_hypertable_1_1_page_arena.html#44c452bae3cd5035244061eaf9fe523b">alloc_page</a>(sz + <span class="keyword">sizeof</span>(Page) + 1, <span class="keyword">false</span>);
<a name="l00186"></a>00186     <span class="keywordflow">return</span> p-&gt;alloc(sz);
<a name="l00187"></a>00187   }
<a name="l00188"></a>00188 
<a name="l00190"></a>00190   CharT *
<a name="l00191"></a><a class="code" href="class_hypertable_1_1_page_arena.html#9559eee781e6b7dcc806702804789eaf">00191</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#9559eee781e6b7dcc806702804789eaf" title="realloc for newsz bytes">realloc</a>(<span class="keywordtype">void</span> *p, <span class="keywordtype">size_t</span> oldsz, <span class="keywordtype">size_t</span> newsz) {
<a name="l00192"></a>00192     <a class="code" href="_logger_8h.html#cf985e8f1a1bebe7d622115e4b3e08a6">HT_ASSERT</a>(<a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>);
<a name="l00193"></a>00193     <span class="comment">// if we're the last one on the current page with enough space</span>
<a name="l00194"></a>00194     <span class="keywordflow">if</span> ((<span class="keywordtype">char</span> *)p + oldsz == <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">alloc_end</a>
<a name="l00195"></a>00195         &amp;&amp; (<span class="keywordtype">char</span> *)p + newsz  &lt; m_cur_page-&gt;page_end) {
<a name="l00196"></a>00196       <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#fc858a3ae3723059d02d4b34897a4ce4">alloc_end</a> = (<span class="keywordtype">char</span> *)p + newsz;
<a name="l00197"></a>00197       <span class="keywordflow">return</span> (CharT *)p;
<a name="l00198"></a>00198     }
<a name="l00199"></a>00199     CharT *<a class="code" href="namespace_hypertable.html#c6963a6498b26e7052b0929dafdb2ce5">copy</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#57261aae2e6d866d2ea6aa14f9101d8b" title="allocate sz bytes">alloc</a>(newsz);
<a name="l00200"></a>00200     memcpy(copy, p, newsz &gt; oldsz ? oldsz : newsz);
<a name="l00201"></a>00201     <span class="keywordflow">return</span> copy;
<a name="l00202"></a>00202   }
<a name="l00203"></a>00203 
<a name="l00205"></a>00205   CharT *
<a name="l00206"></a><a class="code" href="class_hypertable_1_1_page_arena.html#477082f588d3d1972bbb6a3283e70a2f">00206</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#477082f588d3d1972bbb6a3283e70a2f" title="duplicate a null terminated string s">dup</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s) {
<a name="l00207"></a>00207     <span class="keywordflow">if</span> (<a class="code" href="compat-c_8h.html#9721ca68a8db2cfdb9765bd1a2c50985">HT_UNLIKELY</a>(!s))
<a name="l00208"></a>00208       <span class="keywordflow">return</span> NULL;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210     <span class="keywordtype">size_t</span> len = std::strlen(s) + 1;
<a name="l00211"></a>00211     CharT *<a class="code" href="namespace_hypertable.html#c6963a6498b26e7052b0929dafdb2ce5">copy</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#57261aae2e6d866d2ea6aa14f9101d8b" title="allocate sz bytes">alloc</a>(len);
<a name="l00212"></a>00212     memcpy(copy, s, len);
<a name="l00213"></a>00213     <span class="keywordflow">return</span> copy;
<a name="l00214"></a>00214   }
<a name="l00215"></a>00215 
<a name="l00217"></a>00217   CharT *
<a name="l00218"></a><a class="code" href="class_hypertable_1_1_page_arena.html#ebd11d1243b15b51dcb6327d1cac14cb">00218</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#ebd11d1243b15b51dcb6327d1cac14cb" title="duplicate a buffer of size len">dup</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *s, <span class="keywordtype">size_t</span> len) {
<a name="l00219"></a>00219     <span class="keywordflow">if</span> (<a class="code" href="compat-c_8h.html#9721ca68a8db2cfdb9765bd1a2c50985">HT_UNLIKELY</a>(!s))
<a name="l00220"></a>00220       <span class="keywordflow">return</span> NULL;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222     CharT *<a class="code" href="namespace_hypertable.html#c6963a6498b26e7052b0929dafdb2ce5">copy</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#57261aae2e6d866d2ea6aa14f9101d8b" title="allocate sz bytes">alloc</a>(len);
<a name="l00223"></a>00223     memcpy(copy, s, len);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     <span class="keywordflow">return</span> copy;
<a name="l00226"></a>00226   }
<a name="l00227"></a>00227 
<a name="l00229"></a>00229   <span class="keywordtype">void</span>
<a name="l00230"></a><a class="code" href="class_hypertable_1_1_page_arena.html#c8b84843036e1ba566a427c7de85fb8e">00230</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#c8b84843036e1ba566a427c7de85fb8e" title="free the whole arena">free</a>() {
<a name="l00231"></a>00231     Page *page;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233     <span class="keywordflow">while</span> (<a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>) {
<a name="l00234"></a>00234       page = <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>;
<a name="l00235"></a>00235       <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#a5288f4257ebf8043cf44ded7d329e1f">m_cur_page</a>-&gt;<a class="code" href="struct_hypertable_1_1_page_arena_1_1_page.html#4ec001615d3e95c7bfdea5aaeaa02112">next_page</a>;
<a name="l00236"></a>00236       <a class="code" href="class_hypertable_1_1_page_arena.html#70984b3f84c0e803a4b0dd8f37f7f3de">m_allocator</a>.deallocate(page);
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238     <a class="code" href="class_hypertable_1_1_page_arena.html#6401242bb26b277ceba8683928403aee">m_pages</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">m_total</a> = <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a> = 0;
<a name="l00239"></a>00239   }
<a name="l00240"></a>00240 
<a name="l00241"></a><a class="code" href="class_hypertable_1_1_page_arena.html#50908300934b1a7cd186fa0629edaf13">00241</a>   <span class="keywordtype">void</span> <a class="code" href="class_hypertable_1_1_page_arena.html#50908300934b1a7cd186fa0629edaf13">clear</a>() { <span class="keywordflow">return</span> <a class="code" href="class_hypertable_1_1_page_arena.html#c8b84843036e1ba566a427c7de85fb8e" title="free the whole arena">free</a>(); }
<a name="l00242"></a>00242 
<a name="l00244"></a>00244   <span class="keywordtype">void</span>
<a name="l00245"></a><a class="code" href="class_hypertable_1_1_page_arena.html#30db4a0eb35df4beb8847a72013d53eb">00245</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#30db4a0eb35df4beb8847a72013d53eb" title="swap with another allocator efficiently">swap</a>(<a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">SelfT</a> &amp;x) {
<a name="l00246"></a>00246     <a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">SelfT</a> tmp(*<span class="keyword">this</span>);
<a name="l00247"></a>00247     *<span class="keyword">this</span> = x;
<a name="l00248"></a>00248     x = tmp;
<a name="l00249"></a>00249   }
<a name="l00250"></a>00250 
<a name="l00252"></a>00252   std::ostream&amp;
<a name="l00253"></a><a class="code" href="class_hypertable_1_1_page_arena.html#47e543a5859998d64f4146380853e4a1">00253</a>   <a class="code" href="class_hypertable_1_1_page_arena.html#47e543a5859998d64f4146380853e4a1" title="dump some allocator stats">dump_stat</a>(std::ostream&amp; out)<span class="keyword"> const </span>{
<a name="l00254"></a>00254     out &lt;&lt;<span class="stringliteral">"pages="</span>&lt;&lt; <a class="code" href="class_hypertable_1_1_page_arena.html#6401242bb26b277ceba8683928403aee">m_pages</a>
<a name="l00255"></a>00255       &lt;&lt;<span class="stringliteral">", total="</span>&lt;&lt; <a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">m_total</a>
<a name="l00256"></a>00256       &lt;&lt;<span class="stringliteral">", used="</span>&lt;&lt; <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a>
<a name="l00257"></a>00257       &lt;&lt;<span class="stringliteral">"("</span>&lt;&lt; <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a> * 100. / <a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">m_total</a>
<a name="l00258"></a>00258       &lt;&lt;<span class="stringliteral">"%)"</span>;
<a name="l00259"></a>00259     <span class="keywordflow">return</span> out;
<a name="l00260"></a>00260   }
<a name="l00261"></a>00261 
<a name="l00263"></a><a class="code" href="class_hypertable_1_1_page_arena.html#ef735469bfb56f30217b5e7e33e74b7e">00263</a>   <span class="keywordtype">size_t</span> <a class="code" href="class_hypertable_1_1_page_arena.html#ef735469bfb56f30217b5e7e33e74b7e" title="stats accessors">used</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_hypertable_1_1_page_arena.html#b424968f65e05da81c991c5516308286">m_used</a>; }
<a name="l00264"></a><a class="code" href="class_hypertable_1_1_page_arena.html#2df3f6d9eb83655fa1f51dba9b6f8456">00264</a>   <span class="keywordtype">size_t</span> <a class="code" href="class_hypertable_1_1_page_arena.html#2df3f6d9eb83655fa1f51dba9b6f8456">pages</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_hypertable_1_1_page_arena.html#6401242bb26b277ceba8683928403aee">m_pages</a>; }
<a name="l00265"></a><a class="code" href="class_hypertable_1_1_page_arena.html#f577aa704eac74dcb9697d9ad6d11ba3">00265</a>   <span class="keywordtype">size_t</span> <a class="code" href="class_hypertable_1_1_page_arena.html#f577aa704eac74dcb9697d9ad6d11ba3">total</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="class_hypertable_1_1_page_arena.html#d32254baaebf7b2c4156c2dd00f41ba7">m_total</a>; }
<a name="l00266"></a>00266 };
<a name="l00267"></a>00267 
<a name="l00268"></a><a class="code" href="namespace_hypertable.html#5b0bca2aa4571f85df5d92dc308bf826">00268</a> <span class="keyword">typedef</span> <a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">PageArena&lt;&gt;</a> <a class="code" href="class_hypertable_1_1_page_arena.html" title="A simple/fast allocator to avoid individual deletes/frees Good for usage patterns...">CharArena</a>;
<a name="l00269"></a><a class="code" href="namespace_hypertable.html#86fb390532e5641cce248c64c2303447">00269</a> <span class="keyword">typedef</span> <a class="code" href="class_hypertable_1_1_page_arena.html">PageArena&lt;unsigned char&gt;</a> <a class="code" href="class_hypertable_1_1_page_arena.html">ByteArena</a>;
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> CharT, <span class="keyword">class</span> PageAlloc&gt;
<a name="l00272"></a>00272 <span class="keyword">inline</span> std::ostream&amp;
<a name="l00273"></a><a class="code" href="namespace_hypertable.html#a164fe8c84c1c7040bf0ced5480908d6">00273</a> operator&lt;&lt;(std::ostream&amp; out, const PageArena&lt;CharT, PageAlloc&gt; &amp;m) {
<a name="l00274"></a>00274   <span class="keywordflow">return</span> m.dump_stat(out);
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 } <span class="comment">// namespace Hypertable</span>
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 <span class="preprocessor">#endif // !HYPERTABLE_CHARARENA_H</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Aug 15 08:52:16 2009 for hypertable by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
