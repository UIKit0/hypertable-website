<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>hypertable: Hypertable::Comm Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespace_hypertable.html">Hypertable</a>::<a class="el" href="class_hypertable_1_1_comm.html">Comm</a>
  </div>
</div>
<div class="contents">
<h1>Hypertable::Comm Class Reference</h1><!-- doxytag: class="Hypertable::Comm" --><!-- doxytag: inherits="Hypertable::ReferenceCount" -->Provides communication (message passing) services to an application.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_comm_8h_source.html">Comm.h</a>&gt;</code>
<p>
Inherits <a class="el" href="class_hypertable_1_1_reference_count.html">Hypertable::ReferenceCount</a>.
<p>
<div class="dynheader">
Collaboration diagram for Hypertable::Comm:</div>
<div class="dynsection">
<p><center><img src="class_hypertable_1_1_comm__coll__graph.png" border="0" usemap="#_hypertable_1_1_comm__coll__map" alt="Collaboration graph"></center>
<map name="_hypertable_1_1_comm__coll__map">
<area shape="rect" href="class_hypertable_1_1_reference_count.html" title="This class is meant to be a base class for all classes that want to be referenced..." alt="" coords="5,96,197,123"><area shape="rect" href="structatomic__t.html" title="atomic_t" alt="" coords="192,6,264,32"><area shape="rect" href="class_hypertable_1_1_mutex.html" title="Hypertable::Mutex" alt="" coords="392,96,523,123"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="class_hypertable_1_1_comm-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#ab29af416a46e5ef940203207fa9ffab">connect</a> (struct sockaddr_in &amp;addr, <a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;default_handler_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Establishes a TCP connection to the address given by the addr argument and associates with it a default dispatch handler.  <a href="#ab29af416a46e5ef940203207fa9ffab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#01f4d513c8245858aaa14fb528e20f9f">connect</a> (struct sockaddr_in &amp;addr, struct sockaddr_in &amp;local_addr, <a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;default_handler_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Establishes a TCP connection to the address given by the addr argument, binding the local side of the connection to the address given by the local_addr argument.  <a href="#01f4d513c8245858aaa14fb528e20f9f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#42189bce40d36e7be670e79170e63d5f">set_alias</a> (const sockaddr_in &amp;addr, const sockaddr_in &amp;alias)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets an alias for a TCP connection.  <a href="#42189bce40d36e7be670e79170e63d5f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#d8e49fbe70932e0df390f018cfede4c3">listen</a> (struct sockaddr_in &amp;addr, <a class="el" href="namespace_hypertable.html#943250a09f1d457488330abcb5425a7c">ConnectionHandlerFactoryPtr</a> &amp;chf_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells the communication subsystem to listen for connection requests on the address given by the addr argument.  <a href="#d8e49fbe70932e0df390f018cfede4c3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#d4efe8c186860a6b76244c80caac32d5">listen</a> (struct sockaddr_in &amp;addr, <a class="el" href="namespace_hypertable.html#943250a09f1d457488330abcb5425a7c">ConnectionHandlerFactoryPtr</a> &amp;chf_ptr, <a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;default_handler_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tells the communication subsystem to listen for connection requests on the address given by the addr argument.  <a href="#d4efe8c186860a6b76244c80caac32d5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#cceb4d213c3db795b15a7118114cae8b">send_request</a> (const sockaddr_in &amp;addr, uint32_t timeout_ms, <a class="el" href="namespace_hypertable.html#af375d92595688fe01237202c19367ea">CommBufPtr</a> &amp;cbuf_ptr, <a class="el" href="class_hypertable_1_1_dispatch_handler.html">DispatchHandler</a> *response_handler)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a request message over a connection, expecting a response.  <a href="#cceb4d213c3db795b15a7118114cae8b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#e753713dc98a1f852b550bde4f9f1f96">send_response</a> (struct sockaddr_in &amp;addr, <a class="el" href="namespace_hypertable.html#af375d92595688fe01237202c19367ea">CommBufPtr</a> &amp;cbuf_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a response message back over a connection.  <a href="#e753713dc98a1f852b550bde4f9f1f96"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#566a43959b335ffc8b42a49e173c9476">get_local_address</a> (struct sockaddr_in addr, struct sockaddr_in *local_addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obtains the local address of a socket connection.  <a href="#566a43959b335ffc8b42a49e173c9476"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#52bc6f0042ebfacf83f099ca26909602">create_datagram_receive_socket</a> (struct sockaddr_in *addr, int tos, <a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;handler_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a local socket for receiving datagrams and assigns a default dispatch handler to handle events on this socket.  <a href="#52bc6f0042ebfacf83f099ca26909602"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#93140a1cd19fa5d1385f210005bbf9b8">send_datagram</a> (struct sockaddr_in &amp;addr, struct sockaddr_in &amp;send_addr, <a class="el" href="namespace_hypertable.html#af375d92595688fe01237202c19367ea">CommBufPtr</a> &amp;cbuf_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a datagram to a remote address.  <a href="#93140a1cd19fa5d1385f210005bbf9b8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#6f05f1e27fe760cf12530739126e9c5e">set_timer</a> (uint32_t duration_millis, <a class="el" href="class_hypertable_1_1_dispatch_handler.html">DispatchHandler</a> *handler)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets a timer that will generate a TIMER event after some number of milliseconds have elapsed, specified by the duration_millis argument.  <a href="#6f05f1e27fe760cf12530739126e9c5e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#7944902ea91221a5da9623cbadbad1c3">set_timer_absolute</a> (boost::xtime expire_time, <a class="el" href="class_hypertable_1_1_dispatch_handler.html">DispatchHandler</a> *handler)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets a timer that will generate a TIMER event at the absolute time specified by the expire_time argument.  <a href="#7944902ea91221a5da9623cbadbad1c3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#f28dd696003d36d7677b3719e2cfeb46">close_socket</a> (struct sockaddr_in &amp;addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Closes the socket connection specified by the addr argument.  <a href="#f28dd696003d36d7677b3719e2cfeb46"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="class_hypertable_1_1_comm.html">Comm</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#193565c5dddb894233ad534e5f11b8f7">instance</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#53ed7d960a060a0b833d7c69d9abd2ce">destroy</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#47668b629f7201a6ada3ff3afa4ff712">Comm</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#00134417af6aae9bf911d3ec7b8c049b">~Comm</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#8778f1e5619a01e62f4d28ff4fb5b20d">connect_socket</a> (int sd, struct sockaddr_in &amp;addr, <a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;default_handler_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">----- Private methods -----  <a href="#8778f1e5619a01e62f4d28ff4fb5b20d"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_hypertable.html#f69bac2b8487c8ff6afc7d817cf981e2">HandlerMapPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#0a79bcca2a1ab2cf6c45cdfbff0802ac">m_handler_map_ptr</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="namespace_hypertable.html#80c238d30384e96d59799dde4b231cd2">ReactorPtr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#23201b4522610945204322e58cf2aa76">m_timer_reactor_ptr</a></td></tr>

<tr><td colspan="2"><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="class_hypertable_1_1_comm.html">Comm</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#6827ca59f7c4e440a0413668453a714d">ms_instance</a> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structatomic__t.html">atomic_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#8fabafbc7958acae7284de86a9e02407">ms_next_request_id</a> = ATOMIC_INIT(1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="class_hypertable_1_1_mutex.html">Mutex</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_hypertable_1_1_comm.html#5c5704e896270f0854b2c879b096f998">ms_mutex</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Provides communication (message passing) services to an application. 
<p>
There should be only one instance of this class per process and the static method <a class="el" href="class_hypertable_1_1_reactor_factory.html#dda95af73ca29ccaf3f401293495ec76" title="This method creates and initializes the I/O reactor threads and must be called once...">ReactorFactory::initialize</a> must be called prior to constructing this class in order to create the system-wide I/O reactor threads. 
<p>Definition at line <a class="el" href="_comm_8h_source.html#l00042">42</a> of file <a class="el" href="_comm_8h_source.html">Comm.h</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="47668b629f7201a6ada3ff3afa4ff712"></a><!-- doxytag: member="Hypertable::Comm::Comm" ref="47668b629f7201a6ada3ff3afa4ff712" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Comm::Comm           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00066">66</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="00134417af6aae9bf911d3ec7b8c049b"></a><!-- doxytag: member="Hypertable::Comm::~Comm" ref="00134417af6aae9bf911d3ec7b8c049b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Comm::~Comm           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00087">87</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="f28dd696003d36d7677b3719e2cfeb46"></a><!-- doxytag: member="Hypertable::Comm::close_socket" ref="f28dd696003d36d7677b3719e2cfeb46" args="(struct sockaddr_in &amp;addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::close_socket           </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Closes the socket connection specified by the addr argument. 
<p>
This has the effect of closing the connection and removing it from the event demultiplexer (e.g epoll). It also causes all outstanding requests on the connection to get purged.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>address of socket connection to close </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20a5285a55ffe0563faf08208db78e4a6">Error::OK</a> on success or error code on failure </dd></dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00377">377</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="01f4d513c8245858aaa14fb528e20f9f"></a><!-- doxytag: member="Hypertable::Comm::connect" ref="01f4d513c8245858aaa14fb528e20f9f" args="(struct sockaddr_in &amp;addr, struct sockaddr_in &amp;local_addr, DispatchHandlerPtr &amp;default_handler_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::connect           </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>local_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>default_handler_ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Establishes a TCP connection to the address given by the addr argument, binding the local side of the connection to the address given by the local_addr argument. 
<p>
A default dispatch handler is associated with the connection to receive CONNECTION_ESTABLISHED and DISCONNECT events. The argument addr is used to subsequently refer to the connection.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>IP address and port to connect to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>local_addr</em>&nbsp;</td><td>Local IP address and port to bind to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>default_handler_ptr</em>&nbsp;</td><td>smart pointer to default dispatch handler </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20a5285a55ffe0563faf08208db78e4a6">Error::OK</a> on success or error code on failure </dd></dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00128">128</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="ab29af416a46e5ef940203207fa9ffab"></a><!-- doxytag: member="Hypertable::Comm::connect" ref="ab29af416a46e5ef940203207fa9ffab" args="(struct sockaddr_in &amp;addr, DispatchHandlerPtr &amp;default_handler_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::connect           </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>default_handler_ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Establishes a TCP connection to the address given by the addr argument and associates with it a default dispatch handler. 
<p>
CONNECTION_ESTABLISHED and DISCONNECT events are delivered to the default dispatch handler. The argument addr is used to subsequently refer to the connection.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>IP address and port to connect to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>default_handler_ptr</em>&nbsp;</td><td>smart pointer to default dispatch handler </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20a5285a55ffe0563faf08208db78e4a6">Error::OK</a> on success or error code on failure </dd></dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00111">111</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="8778f1e5619a01e62f4d28ff4fb5b20d"></a><!-- doxytag: member="Hypertable::Comm::connect_socket" ref="8778f1e5619a01e62f4d28ff4fb5b20d" args="(int sd, struct sockaddr_in &amp;addr, DispatchHandlerPtr &amp;default_handler_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::connect_socket           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>default_handler_ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
----- Private methods ----- 
<p>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00394">394</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="52bc6f0042ebfacf83f099ca26909602"></a><!-- doxytag: member="Hypertable::Comm::create_datagram_receive_socket" ref="52bc6f0042ebfacf83f099ca26909602" args="(struct sockaddr_in *addr, int tos, DispatchHandlerPtr &amp;handler_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Comm::create_datagram_receive_socket           </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_in *&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>handler_ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a local socket for receiving datagrams and assigns a default dispatch handler to handle events on this socket. 
<p>
This socket can also be used for sending datagrams. The events delivered for this socket consist of either MESSAGE events or ERROR events.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>address of the socket </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tos</em>&nbsp;</td><td>TOS value to set on IP packet </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handler_ptr</em>&nbsp;</td><td>default dispatch handler to handle the deliver of events </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00260">260</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="53ed7d960a060a0b833d7c69d9abd2ce"></a><!-- doxytag: member="Hypertable::Comm::destroy" ref="53ed7d960a060a0b833d7c69d9abd2ce" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Comm::destroy           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00102">102</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="566a43959b335ffc8b42a49e173c9476"></a><!-- doxytag: member="Hypertable::Comm::get_local_address" ref="566a43959b335ffc8b42a49e173c9476" args="(struct sockaddr_in addr, struct sockaddr_in *local_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::get_local_address           </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_in&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_in *&nbsp;</td>
          <td class="paramname"> <em>local_addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Obtains the local address of a socket connection. 
<p>
The connection is identified by the remote address in the addr argument.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>connection identifier (remote address) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>local_addr</em>&nbsp;</td><td>pointer to address structure to hold the returned local address </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20a5285a55ffe0563faf08208db78e4a6">Error::OK</a> on success or error code on failure </dd></dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00361">361</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="193565c5dddb894233ad534e5f11b8f7"></a><!-- doxytag: member="Hypertable::Comm::instance" ref="193565c5dddb894233ad534e5f11b8f7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_hypertable_1_1_comm.html">Comm</a>* Hypertable::Comm::instance           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_comm_8h_source.html#l00044">44</a> of file <a class="el" href="_comm_8h_source.html">Comm.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="d4efe8c186860a6b76244c80caac32d5"></a><!-- doxytag: member="Hypertable::Comm::listen" ref="d4efe8c186860a6b76244c80caac32d5" args="(struct sockaddr_in &amp;addr, ConnectionHandlerFactoryPtr &amp;chf_ptr, DispatchHandlerPtr &amp;default_handler_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Comm::listen           </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#943250a09f1d457488330abcb5425a7c">ConnectionHandlerFactoryPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>chf_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#be9c0c322c8046d0d9354fa21badf501">DispatchHandlerPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>default_handler_ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tells the communication subsystem to listen for connection requests on the address given by the addr argument. 
<p>
New connections will be assigned dispatch handlers by invoking the get_instance method of the connection handler factory supplied as the chf_ptr argument. CONNECTION_ESTABLISHED events are delivered via the default dispatch handler supplied in the default_handler_ptr argument.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>IP address and port to listen for connection on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chf_ptr</em>&nbsp;</td><td>connection handler factory smart pointer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>default_handler_ptr</em>&nbsp;</td><td>smart pointer to default dispatch handler </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00165">165</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="d8e49fbe70932e0df390f018cfede4c3"></a><!-- doxytag: member="Hypertable::Comm::listen" ref="d8e49fbe70932e0df390f018cfede4c3" args="(struct sockaddr_in &amp;addr, ConnectionHandlerFactoryPtr &amp;chf_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Comm::listen           </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#943250a09f1d457488330abcb5425a7c">ConnectionHandlerFactoryPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>chf_ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tells the communication subsystem to listen for connection requests on the address given by the addr argument. 
<p>
New connections will be assigned dispatch handlers by invoking the get_instance method of the connection handler factory supplied as the chf_ptr argument. CONNECTION_ESTABLISHED events are logged, but not delivered to the application<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>IP address and port to listen for connection on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chf_ptr</em>&nbsp;</td><td>connection handler factory smart pointer </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00152">152</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="93140a1cd19fa5d1385f210005bbf9b8"></a><!-- doxytag: member="Hypertable::Comm::send_datagram" ref="93140a1cd19fa5d1385f210005bbf9b8" args="(struct sockaddr_in &amp;addr, struct sockaddr_in &amp;send_addr, CommBufPtr &amp;cbuf_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::send_datagram           </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>send_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#af375d92595688fe01237202c19367ea">CommBufPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>cbuf_ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends a datagram to a remote address. 
<p>
The remote address is specified by the addr argument and the local socket address to send it from is specified by the send_addr argument. The send_addr argument must refer to a socket that was created with a call to <a class="el" href="class_hypertable_1_1_comm.html#52bc6f0042ebfacf83f099ca26909602" title="Creates a local socket for receiving datagrams and assigns a default dispatch handler...">create_datagram_receive_socket</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>remote address to send datagram to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>send_addr</em>&nbsp;</td><td>local socket address to send from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cbuf_ptr</em>&nbsp;</td><td>datagram message with valid header </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20a5285a55ffe0563faf08208db78e4a6">Error::OK</a> on success or error code on failure </dd></dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00316">316</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="cceb4d213c3db795b15a7118114cae8b"></a><!-- doxytag: member="Hypertable::Comm::send_request" ref="cceb4d213c3db795b15a7118114cae8b" args="(const sockaddr_in &amp;addr, uint32_t timeout_ms, CommBufPtr &amp;cbuf_ptr, DispatchHandler *response_handler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::send_request           </td>
          <td>(</td>
          <td class="paramtype">const sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>timeout_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#af375d92595688fe01237202c19367ea">CommBufPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>cbuf_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_hypertable_1_1_dispatch_handler.html">DispatchHandler</a> *&nbsp;</td>
          <td class="paramname"> <em>response_handler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends a request message over a connection, expecting a response. 
<p>
The connection is specified by the addr argument which is the remote end of the connection. The request message to send is encapsulated in the cbuf_ptr object (see <a class="el" href="class_hypertable_1_1_comm_buf.html" title="Message buffer sent over the network by the AsyncComm subsystem.">CommBuf</a>) and should start with a valid header. The dispatch handler given by the response_handler argument will get called back with either a response MESSAGE event or a TIMEOUT event if no response is received within the number of seconds specified by the timeout argument.<p>
If the server at the other end of the connection uses an <a class="el" href="class_hypertable_1_1_application_queue.html" title="Provides application work queue and worker threads.">ApplicationQueue</a> to carry out requests, then the gid field in the header can be used to serialize requests that are destined for the same object. For example, the following code serializes requests to the same file descriptor: <pre>
 HeaderBuilder hbuilder(Header::PROTOCOL_DFSBROKER);
 hbuilder.set_group_id(fd);
 <a class="el" href="class_hypertable_1_1_comm_buf.html" title="Message buffer sent over the network by the AsyncComm subsystem.">CommBuf</a> *cbuf = new CommBuf(hbuilder, 14);
 cbuf-&gt;AppendShort(COMMAND_READ);
 cbuf-&gt;AppendInt(fd);
 cbuf-&gt;AppendLong(amount);
 </pre><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>connection identifier (remote address) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout_ms</em>&nbsp;</td><td>number of milliseconds to wait before delivering TIMEOUT event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cbuf_ptr</em>&nbsp;</td><td>request message to send (see <a class="el" href="class_hypertable_1_1_comm_buf.html" title="Message buffer sent over the network by the AsyncComm subsystem.">CommBuf</a>) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>response_handler</em>&nbsp;</td><td>pointer to response handler associated with the request </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20a5285a55ffe0563faf08208db78e4a6">Error::OK</a> on success or error code on failure </dd></dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00205">205</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="e753713dc98a1f852b550bde4f9f1f96"></a><!-- doxytag: member="Hypertable::Comm::send_response" ref="e753713dc98a1f852b550bde4f9f1f96" args="(struct sockaddr_in &amp;addr, CommBufPtr &amp;cbuf_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::send_response           </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_hypertable.html#af375d92595688fe01237202c19367ea">CommBufPtr</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>cbuf_ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends a response message back over a connection. 
<p>
It is assumed that the id field of the header matches the id field of the request for which this is a response to. The connection is specified by the addr argument which is the remote end of the connection. The response message to send is encapsulated in the cbuf_ptr (see <a class="el" href="class_hypertable_1_1_comm_buf.html" title="Message buffer sent over the network by the AsyncComm subsystem.">CommBuf</a>) object and should start with a valid header. The following code snippet illustrates how a simple response message gets created to send back to a client in response to a request message:<p>
<pre>
 HeaderBuilder hbuilder;
 hbuilder.initialize_from_request(request_event_ptr-&gt;header);
 CommBufPtr cbp(new CommBuf(hbuilder, 4));
 cbp-&gt;append_i32(Error::OK);
 </pre><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>connection identifier (remote address) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cbuf_ptr</em>&nbsp;</td><td>response message to send (must have valid header with matching request id) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20a5285a55ffe0563faf08208db78e4a6">Error::OK</a> on success or error code on failure </dd></dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00238">238</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="42189bce40d36e7be670e79170e63d5f"></a><!-- doxytag: member="Hypertable::Comm::set_alias" ref="42189bce40d36e7be670e79170e63d5f" args="(const sockaddr_in &amp;addr, const sockaddr_in &amp;alias)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::set_alias           </td>
          <td>(</td>
          <td class="paramtype">const sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const sockaddr_in &amp;&nbsp;</td>
          <td class="paramname"> <em>alias</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets an alias for a TCP connection. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>connection identifier (remote address) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>alias</em>&nbsp;</td><td>alias connection identifier </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00158">158</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="6f05f1e27fe760cf12530739126e9c5e"></a><!-- doxytag: member="Hypertable::Comm::set_timer" ref="6f05f1e27fe760cf12530739126e9c5e" args="(uint32_t duration_millis, DispatchHandler *handler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::set_timer           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>duration_millis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_hypertable_1_1_dispatch_handler.html">DispatchHandler</a> *&nbsp;</td>
          <td class="paramname"> <em>handler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets a timer that will generate a TIMER event after some number of milliseconds have elapsed, specified by the duration_millis argument. 
<p>
The handler argument represents the dispatch handler to receive the TIMER event.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>duration_millis</em>&nbsp;</td><td>number of milliseconds to wait </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handler</em>&nbsp;</td><td>the dispatch handler to receive the TIMER event upon expiration </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20a5285a55ffe0563faf08208db78e4a6">Error::OK</a> on success or error code on failure </dd></dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00340">340</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="7944902ea91221a5da9623cbadbad1c3"></a><!-- doxytag: member="Hypertable::Comm::set_timer_absolute" ref="7944902ea91221a5da9623cbadbad1c3" args="(boost::xtime expire_time, DispatchHandler *handler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Comm::set_timer_absolute           </td>
          <td>(</td>
          <td class="paramtype">boost::xtime&nbsp;</td>
          <td class="paramname"> <em>expire_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_hypertable_1_1_dispatch_handler.html">DispatchHandler</a> *&nbsp;</td>
          <td class="paramname"> <em>handler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets a timer that will generate a TIMER event at the absolute time specified by the expire_time argument. 
<p>
The handler argument represents the dispatch handler to receive the TIMER event.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>expire_time</em>&nbsp;</td><td>number of milliseconds to wait </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handler</em>&nbsp;</td><td>the dispatch handler to receive the TIMER event upon expiration </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="namespace_hypertable_1_1_error.html#73c48f53deb2941a8c0ef156a899c3b20a5285a55ffe0563faf08208db78e4a6">Error::OK</a> on success or error code on failure </dd></dl>

<p>Definition at line <a class="el" href="_comm_8cc_source.html#l00351">351</a> of file <a class="el" href="_comm_8cc_source.html">Comm.cc</a>.</p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="0a79bcca2a1ab2cf6c45cdfbff0802ac"></a><!-- doxytag: member="Hypertable::Comm::m_handler_map_ptr" ref="0a79bcca2a1ab2cf6c45cdfbff0802ac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_hypertable.html#f69bac2b8487c8ff6afc7d817cf981e2">HandlerMapPtr</a> <a class="el" href="class_hypertable_1_1_comm.html#0a79bcca2a1ab2cf6c45cdfbff0802ac">Hypertable::Comm::m_handler_map_ptr</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_comm_8h_source.html#l00268">268</a> of file <a class="el" href="_comm_8h_source.html">Comm.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="23201b4522610945204322e58cf2aa76"></a><!-- doxytag: member="Hypertable::Comm::m_timer_reactor_ptr" ref="23201b4522610945204322e58cf2aa76" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_hypertable.html#80c238d30384e96d59799dde4b231cd2">ReactorPtr</a> <a class="el" href="class_hypertable_1_1_comm.html#23201b4522610945204322e58cf2aa76">Hypertable::Comm::m_timer_reactor_ptr</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_comm_8h_source.html#l00269">269</a> of file <a class="el" href="_comm_8h_source.html">Comm.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="6827ca59f7c4e440a0413668453a714d"></a><!-- doxytag: member="Hypertable::Comm::ms_instance" ref="6827ca59f7c4e440a0413668453a714d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_hypertable_1_1_comm.html">Comm</a> * <a class="el" href="class_hypertable_1_1_comm.html#6827ca59f7c4e440a0413668453a714d">Comm::ms_instance</a> = NULL<code> [static, private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_comm_8h_source.html#l00260">260</a> of file <a class="el" href="_comm_8h_source.html">Comm.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="5c5704e896270f0854b2c879b096f998"></a><!-- doxytag: member="Hypertable::Comm::ms_mutex" ref="5c5704e896270f0854b2c879b096f998" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_hypertable_1_1_mutex.html">Mutex</a> <a class="el" href="class_hypertable_1_1_comm.html#5c5704e896270f0854b2c879b096f998">Comm::ms_mutex</a><code> [static, private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_comm_8h_source.html#l00267">267</a> of file <a class="el" href="_comm_8h_source.html">Comm.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="8fabafbc7958acae7284de86a9e02407"></a><!-- doxytag: member="Hypertable::Comm::ms_next_request_id" ref="8fabafbc7958acae7284de86a9e02407" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structatomic__t.html">atomic_t</a> <a class="el" href="class_hypertable_1_1_comm.html#8fabafbc7958acae7284de86a9e02407">Comm::ms_next_request_id</a> = ATOMIC_INIT(1)<code> [static, private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_comm_8h_source.html#l00265">265</a> of file <a class="el" href="_comm_8h_source.html">Comm.h</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>/Users/doug/src/hypertable/src/cc/AsyncComm/<a class="el" href="_comm_8h_source.html">Comm.h</a><li>/Users/doug/src/hypertable/src/cc/AsyncComm/<a class="el" href="_comm_8cc_source.html">Comm.cc</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Aug 15 09:01:20 2009 for hypertable by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
